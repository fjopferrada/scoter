* Tasks
** DONE 001 Look at namedtuple for configuration parameters
   CLOSED: [2013-11-17 Sun 10:25]
** DONE 002 Fix the multiply-inverting y-axes
   CLOSED: [2013-11-08 Fri 21:55]
** DONE 003 Better handling for non-equal-length series
   CLOSED: [2014-02-25 Tue 16:08]
   Currently bombs out with an error. Should catch the error
   and present it to the user via the GUI.
   [Not sure when this got fixed but seems OK now.]
** DONE 004 Tidy up live SA plot code a bit
   CLOSED: [2014-02-21 Fri 15:30]
** TODO 005 Idea for improving the SA scheduler
   In the adaptive scheduler, a temperature step can be terminated either (2)
   by clocking a certain number of accepted changes or (as a fallback when
   improvements are impossible) (2) by going through a certain number of
   iterations. The termination condition is actually valuable information! If
   (2) occurs, there's an implication that we're in a local minimum --
   perhaps this means we can increase the cooling rate. Vice versa may also
   apply, but need to think about it carefully: what if it's just a
   metastable state where we're continually hopping between the same few
   solutions?

   Need more of these ‘self-steering’ adaptations so users don't need
   to manually tweak a bunch of incomprehensible simulated annealing
   parameters for each new dataset.
** DONE 006 Store user preferences using wx.Config API
   CLOSED: [2013-11-17 Sun 10:24]
** DONE 007 Add an interface to the Match program
   CLOSED: [2013-12-02 Mon 11:12]
*** DONE Proof-of-concept implementation
    CLOSED: [2013-11-28 Thu 18:55]
*** DONE Clean up the interface code
    CLOSED: [2013-12-02 Mon 11:12]
*** DONE Configure Match from GUI settings panel
    CLOSED: [2013-12-02 Mon 11:12]
** DONE 008 Add SA configuration options to correlation pane
   CLOSED: [2013-11-22 Fri 09:56]
** DONE 009 Add SA parameters to Scoter arguments
   CLOSED: [2013-11-22 Fri 09:56]
   Random seed, start/end temperatures, cooling rate, thresholds, rate
   change penalty, ... hopefully at least some of these will become
   irrelevant or automatically configurable in time, but for now they should
   at least not be baked into the code.
** DONE 010 ScoterGui.quit() not called on window closing
   CLOSED: [2013-11-17 Sun 10:36]
   The application quits when the window closes, but quit() is
   only called if the application is terminated via the Quit menu
   item. So any required housekeeping in quit() is not guaranteed
   to be called. At the moment, said housekeeping consists of saving
   the current parameters via the wx.Config API.

** DONE 011 Add settings import/export feature
   CLOSED: [2014-01-17 Fri 14:37]
   The user should be able to save the entire state of the Scoter
   ‘workspace’ (including data sources, preprocessing, and
   correlation configuration) to a file and reload it to restore
   the state.
** DONE 012 Add ‘reset configuration’ button
   CLOSED: [2014-01-17 Fri 14:41]
   An essential complement to a configuration that persists across
   restarts of the program!
** DONE 013 Make progress bar work correctly
   CLOSED: [2014-02-17 Mon 15:26]
   Currently the progress bar only shows realistic progress if the
   final temperature is 1.

** DONE 014 Add a plot-based GUI to truncate series
   CLOSED: [2014-02-18 Tue 17:39]
   The current design, with truncation text entry boxes in the
   preprocessing tab, is a little clunky: it would be better to
   have the truncation options in the data-series tabs with
   the graphs, with a hook into matplotlib to allow the user to
   select the truncation points graphically.

** DONE 015 First proto-draft of manual
   CLOSED: [2014-03-04 Tue 14:31]
   No sense in fleshing it out fully until the program's complete, but I need
   a skeleton in place into which I can drop snippets as they occur to me.
   Growing the manual slowly from a "hello world" will also make it easier to
   debug any asciidoc problems.

** DONE 016 Separate nblocks parameters for SA and Match
   CLOSED: [2014-03-10 Mon 17:29]
** DONE 017 Match graphs don't always update after run
   CLOSED: [2014-03-06 Thu 11:33]
   To reproduce: start program, run correlation, switch to Match results tab,
   observe that plots are blank. Resize window and graphs appear. NB does
   not manifest itself when scotergui is run in debug mode.

   Fixed: it was a stupid typo -- the code was calling FigureCanvas.draw()
   on the SA canvas, not the Match one!
** DONE 018 Use Scoter defaults as wx.Config defaults
   CLOSED: [2013-12-03 Tue 10:44]
   Currently, ScoterConfig has hardcoded defaults for any missing
   arguments to its constructor. However, ScoterGui uses its own
   hardcoded defaults when creating a ScoterConfig using
   wx.Config! ScoterGui should instantiate a default ScoterConfig
   without arguments, and use its field values in 
   read_params_from_wxconfig.
** DONE 019 Better save/load of match path in GUI
   CLOSED: [2013-12-04 Wed 10:24]
** DONE 020 Rethink configuration architecture in scotergui
   CLOSED: [2013-12-07 Sat 17:45]
   A bit of a mess at the moment: scotergui reads a wx.Config
   into a ScoterConfig, but only ever uses that ScoterConfig
   to initialize the GUI. When a correlation is run, the GUI
   state is used to instantiate *another* ScoterConfig which is
   passed to the Scoter instance. There's no need to round-trip
   the initial configuration via a ScoterConfig: Scoter itself
   will never need to deal with a wx.Config -- it *will* need
   file-based configuration at some point but this should be
   based on configparser. The round-trip introduces some hackiness
   too, since the ScoterGui and Scoter configs don't map exactly
   onto each other: the Match path is specified differently.
** DONE 021 More interpolation methods
   CLOSED: [2014-03-11 Tue 16:41]
** TODO 022 Assessment of goodness of correlation
   Even if just a simple correlation coefficient between tuned
   record and target.
** DONE 023 Unequal weighting of two records in tandem
   CLOSED: [2014-03-18 Tue 16:58]
   Perhaps even dynamic? As a function of data resolution?
   That might be overkill. But at least do it at the preprocessing
   stage so that Match can also benefit.
** DONE 024 Command-line operation
   CLOSED: [2014-02-16 Sun 20:03]
   Currently the only interface to the scoter module is via scotergui. Add a
   command-line parser to scoter for non-interactive operation.
** DONE 025 ScoterGui should remember data directories
   CLOSED: [2014-02-10 Mon 14:58]
   ScoterGui's Save and Load dialogs should remember the last-used
   directory (even across restarts).
** DONE 026 Record paths are not saved in configuration
   CLOSED: [2014-02-18 Tue 17:39]
   Neither the GUI configuration nor the non-interactive Scoter
   configuration allows for saving and restoring paths to records,
   so even though the rest of the configuration is persistent,
   records need to be re-opened on every run. (In non-interactive
   mode it is currently impossible to specify records, making it
   impossible to run usefully.) Any per-record configuration (most
   obviously truncation) needs to be saved as well.
** DONE 027 Add one-point overlap when clipping records
   CLOSED: [2014-03-19 Wed 20:36]
   Match requires that configured start/end points for records be (strictly?
   probably not) within the range of the data -- otherwise it fails with an
   error like "Configuration end value 978 follows the last point in the
   series: 952". Add a parameter to Series.clip for "generous" clipping --
   i.e. one extra data point on each side of the strict clipping window.

   Closed as invalid: MatchSeriesConf is not passed as explicit window;
   it just uses the innermost endpoints of the series (plural) it's
   instantiated with. I suspect the error was caused by a now-fixed
   bug elsewhere, since I can't reproduce it now. Can open a new bug (with
   associated config and data files) if it reappears.
** DONE 028 Capture Match exit status and output
   CLOSED: [2014-03-01 Sat 23:50]
   At present, any Match failure is silent unless the user
   runs scoter from the command line.
** TODO 029 Resolve data paths relative to configuration file
   For non-interactive operation, relative paths to data files
   should be resolved relative to the configuration file itself.
   This will be helpful in producing self-contained "bundles"
   of data and configuration.

** TODO 030 Remove spaces from Match input files
   Match can't handle filenames containing spaces. Scoter
   should render the filenames "safe" when copying the files
   to the Match directory.
** DONE 031 Add licence information to source files
   CLOSED: [2014-02-25 Tue 18:05]
** TODO 032 Fix the live SA display
   Problems persist with the live plot of simulated annealing --
   I suspect that the SA calculation thread is starving the GUI
   update thread (updates can't be done directly from the SA
   callback since redraws have to happen in the wx thread) --
   however, the progress bar is well-behaved so this can't be
   the only problem. I might be redrawing the plot in some 
   unnecessarily slow way; the matplotlib animation API could
   help in that case. In any case, if it turns out to be a hard
   problem the easiest solution is to remove it at least from the
   initial release. It's not essential.
** TODO 033 Add SA metrics to live display
   At least for development purposes, it would be useful to have
   figures for current temperature, number of accepted changes,
   whether temperature is reduced due to number of steps or
   number of acceptances, etc. Would be even better (if I can
   get matplotlib live display working properly) to graph them.
** DONE 034 Drag-and-drop file loading
   CLOSED: [2014-03-01 Sat 19:13]
   For both configuration and data files.

** TODO 035 Problems matching a series with itself
   Obviously not something you'd actually want to do in practice, but useful
   for testing and possibly indicative of other problems. If you match a
   series with itself with different clipping windows for record and target,
   Match fails with a message like "Configuration end value 1198 follows the
   last point in the series: 998". I suspect that it's a problem with two
   identically named series, one of which is overwriting the other. I think
   this problem would also occur with two series with the same filename
   residing in different directories. Easiest solution is probably to add
   some short unique tag (e.g. "-dt" for d18O target, and so forth) when
   creating a series identifier from a filename.
** TODO 036 Add exporting for Scoter config and bundle
   Add a feature allowing the GUI to export a configparser Scoter
   configuration (for offline operation) and a self-contained
   "data and analysis" bundle: a folder with copies of the input
   data and the configuration files -- both for ScoterGui and
   Scoter. This is an important feature for easy reproducible
   analysis.
** TODO 037 Make block comparison formula configurable?
   Various methods have been used in the literature for assessing the similarity
   of two series-chunks, for correlation purposes. Match uses sum of squared 
   distances. Other use cross correlation. Experiments with Scoter so far have
   used either Match-style squared distance, or simple sum of absolute distance
   (since I couldn't really see any particular rationale for squaring it). In any
   case, the formula needs to be officially fixed to ensure reproducibility of
   analysis, or made configurable by the user.
   
** TODO 038 Include Scoter version number in saved configurations
   Obviously important for reproducibility!
** DONE 039 License icon correctly
   CLOSED: [2014-03-11 Tue 14:47]
   The Scoter icon is derived from a CC-licensed photograph. Scoter docs need
   to attribute the original photograph, and apply the appropriate licence to
   the derived icon.
** DONE 040 Improve terminology for series designations
   CLOSED: [2014-03-05 Wed 17:49]
   At present, terminology in the source code is inconsistent can be a little
   confusing when attempting to distinguish between d18/RPI and record/target
   for data series. I need to enforce a standard terminology for this --
   perhaps "property" and "role" respectively. Probably hard to find terms
   that are both brief and clear, but I think I can do better than the
   current ones.

   Turns out "property" is a bad choice, since it's a Python builtin.
   Going with "parameter", despite the unfortunate overlap with 
   programming terminology.
** TODO 041 SA algorithm: cut off when score stops improving
** TODO 042 Move and activate clipping limit text boxes
   These are currently present on the preprocessing tab, but inactive.
   It would make much more sense to have them on the input series tabs
   alongside the associated graphs (and, of course, to have them actually
   working).

** TODO 043 Allow correlation using only one method
   At present, both SA and Match are used every time.
